{"version":3,"sources":["projects/components/state.cljs"],"mappings":"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","names":["projects.components.state/initial-state","projects.components.state/app-state","helix.core/create-context","js/projects","js/projects.components","js/projects.components.state","js/projects.components.state.app-reducer","method-table__4619__auto__","cljs.core.atom","prefer-table__4620__auto__","method-cache__4621__auto__","cached-hierarchy__4622__auto__","hierarchy__4623__auto__","cljs.core.get","fexpr__29151","cljs.core/MultiFn","cljs.core.symbol","projects.components.state/app-reducer","_","action","cljs.core/first","p__29152","vec__29153","cljs.core.nth","state","payload","cljs.core.assoc","p__29156","vec__29157","p__29160","vec__29161","p__29165","vec__29166","prev","next","p1__29164#","cljs.core.remove","cljs.core._EQ_","p__29170","vec__29171","p1__29169#","cljs.core.update","cljs.core.conj","p__29175","vec__29176","p1__29174#","cljs.core.map","project","p__29179","vec__29180","clj-payload","cljs.core.js__GT_clj","p__29183","vec__29184","projects.components.state/use-app-state","vec__29194","p1__29189#","p1__29188#","p1__29190#","p1__29187#","p1__29192#","p1__29193#","p1__29191#","dispatch","helix.hooks/use-context","G__29202","G__29200","G__29199","G__29201","event","G__29206","G__29207","G__29205","G__29197","G__29198","G__29208","G__29203","G__29204"],"sourcesContent":["(ns projects.components.state\n  (:require [helix.core :refer [create-context]]\n            [helix.hooks :as hooks]))\n\n(def initial-state {:selected nil\n                    :projects []\n                    :project-history []\n                    :user nil\n                    :token nil\n                    :message nil})\n\n(def app-state (create-context nil))\n\n\n(defmulti app-reducer \n  (fn [_ action]\n    (first action)))\n\n(defmethod app-reducer\n  ::set-projects [state [_ payload]]\n  (assoc state :projects payload))\n\n(defmethod app-reducer\n  ::set-project-history [state [_ payload]]\n  (assoc state :project-history payload))\n\n(defmethod app-reducer\n  ::set-selected [state [_ payload]]\n  (assoc state :selected payload))\n\n(defmethod app-reducer\n  ::remove-project [state [_ payload]]\n  (let [prev (:projects state)\n        next (remove #(= (:id payload) (:id %)) prev)]\n    (-> state\n        (assoc :projects next)\n        (assoc :project-history []))))\n\n(defmethod app-reducer\n  ::add-project [state [_ payload]]\n  (update state :projects #(conj % payload)))\n\n(defmethod app-reducer\n  ::update-project [state [_ payload]]\n  (update state :projects #(map (fn [project]\n                                  (if (= (:id project) (:id payload))\n                                    payload\n                                    project))\n                                %)))\n\n(defmethod app-reducer\n  ::new-project [state _]\n  (assoc state :selected {:status-name \"Initial\"\n                          :name \"\"}))\n\n(defmethod app-reducer\n  ::authenticate [state [_ payload]]\n  (let [clj-payload (js->clj payload)]\n    (-> state\n        (assoc :user (:user clj-payload))\n        (assoc :token (:token clj-payload)))))\n\n(defmethod app-reducer\n  ::set-message [state [_ payload]]\n  (assoc state :message payload))\n\n(defmethod app-reducer\n  ::sign-out [_ _]\n  initial-state)\n\n\n(defn use-app-state []\n  (let [[state dispatch] (hooks/use-context app-state)]\n    [state {:set-projects #(dispatch [::set-projects %])\n            :set-project-history #(dispatch [::set-project-history %])\n            :set-selected #(dispatch [::set-selected %])\n            :remove-project #(dispatch [::remove-project %])\n            :add-project (fn [event] \n                           (dispatch [::add-project event])\n                           (dispatch [::set-selected nil]))\n            :new-project #(dispatch [::new-project nil])\n            :update-project (fn [event]\n                              (dispatch [::update-project event])\n                              (dispatch [::set-selected nil]))\n            :authenticate #(dispatch [::authenticate %])\n            :sign-out #(dispatch [::sign-out %])\n            :set-message #(dispatch [::set-message %])}]))"]}